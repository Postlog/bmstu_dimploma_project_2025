/**
 * –¢–µ—Å—Ç—ã –¥–ª—è dfa.js - –î–ö–ê (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)
 * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ Node.js, —Ç–∞–∫ –∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
 */

import { NFA } from '../nfa.js';
import { DFA, runDFA } from '../dfa.js';

/**
 * –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –î–ö–ê
 */
function runSingleTest(testCase) {
    try {
        const nfa = NFA.fromRegex(testCase.regex, testCase.style || 'test-style');
        const dfa = DFA.fromNFA(nfa);
        const result = runDFA(dfa, testCase.input);

        const success = result === testCase.expected;
        const status = success ? '‚úÖ' : '‚ùå';
        const displayString = testCase.input === '' ? '(–ø—É—Å—Ç–∞—è)' : `"${testCase.input}"`;

        console.log(`\t${status} ${testCase.name}`);

        if (!success) {
            console.log(`\t–í—Ö–æ–¥: ${displayString}`);
            console.log(`\t–†–µ–≥–µ–∫—Å: ${testCase.regex}`);
            console.log(`\t–ü–æ–ª—É—á–µ–Ω–æ: ${result}`);
            console.log(`\t–û–∂–∏–¥–∞–ª–æ—Å—å: ${testCase.expected}`);

            if (testCase.description) {
                console.log(`\t–û–ø–∏—Å–∞–Ω–∏–µ: ${testCase.description}`);
            }
        }

        return success;
    } catch (error) {
        console.log(`\tüí• –û–®–ò–ë–ö–ê –≤ —Ç–µ—Å—Ç–µ "${testCase.name}": ${error.message}`);
        return false;
    }
}

/**
 * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –î–ö–ê
 */
function runAllDFATests() {
    // –ï–¥–∏–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤
    const testCases = [
    // ========== –ë–ê–ó–û–í–´–ï –û–ü–ï–†–ê–¶–ò–ò ==========
        {
            name: '–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'a',
            input: 'a',
            expected: true,
            description: '–ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–ª—É—á–∞–π - –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª - –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'a',
            input: 'b',
            expected: false,
            description: '–î—Ä—É–≥–æ–π —Å–∏–º–≤–æ–ª –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å',
        },
        {
            name: '–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: 'a',
            input: '',
            expected: false,
            description: '–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–∏–º–≤–æ–ª–æ–º',
        },
        {
            name: '–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª - –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã',
            regex: 'a',
            input: 'aa',
            expected: false,
            description: '–õ–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –¥–µ–ª–∞—é—Ç —Å—Ç—Ä–æ–∫—É –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–π',
        },

        // ========== –ü–†–û–°–¢–´–ï –°–õ–û–í–ê ==========
        {
            name: '–ü—Ä–æ—Å—Ç–æ–µ —Å–ª–æ–≤–æ - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'hello',
            input: 'hello',
            expected: true,
            description: '–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤–∞',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–µ —Å–ª–æ–≤–æ - —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'hello',
            input: 'hell',
            expected: false,
            description: '–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–µ —Å–ª–æ–≤–æ - —Å –ª–∏—à–Ω–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏',
            regex: 'hello',
            input: 'hello world',
            expected: false,
            description: '–õ–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –ø–æ—Å–ª–µ —Å–ª–æ–≤–∞',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–µ —Å–ª–æ–≤–æ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ',
            regex: 'hello',
            input: 'world',
            expected: false,
            description: '–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ',
        },

        // ========== –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´ ==========
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç',
            regex: 'a|b',
            input: 'a',
            expected: true,
            description: '–ü–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç',
            regex: 'a|b',
            input: 'b',
            expected: true,
            description: '–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'a|b',
            input: 'c',
            expected: false,
            description: '–°–∏–º–≤–æ–ª –Ω–µ –∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å–ª–æ–≤ - –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ',
            regex: 'hello|world',
            input: 'hello',
            expected: true,
            description: '–ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å–ª–æ–≤ - –≤—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ',
            regex: 'hello|world',
            input: 'world',
            expected: true,
            description: '–í—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ –∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å–ª–æ–≤ - –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: 'hello|world',
            input: 'test',
            expected: false,
            description: '–°–ª–æ–≤–æ –Ω–µ –∏–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
        },
        {
            name: '–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞',
            regex: 'if|else|for|while',
            input: 'for',
            expected: true,
            description: '–û–¥–Ω–æ –∏–∑ –º–Ω–æ–≥–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤',
        },

        // ========== –ó–ê–ú–´–ö–ê–ù–ò–ï –ö–õ–ò–ù–ò (*) ==========
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: 'a*',
            input: '',
            expected: true,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É',
        },
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
            regex: 'a*',
            input: 'a',
            expected: true,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
            regex: 'a*',
            input: 'aaa',
            expected: true,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
        },
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
            regex: 'a*',
            input: 'aaaaaaa',
            expected: true,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
        },
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
            regex: 'a*',
            input: 'b',
            expected: false,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–ó–≤–µ–∑–¥–æ—á–∫–∞ - —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
            regex: 'a*',
            input: 'ab',
            expected: false,
            description: '–ó–≤–µ–∑–¥–æ—á–∫–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
        },

        // ========== –ü–õ–Æ–° (+) ==========
        {
            name: '–ü–ª—é—Å - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: 'a+',
            input: '',
            expected: false,
            description: '–ü–ª—é—Å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É',
        },
        {
            name: '–ü–ª—é—Å - –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
            regex: 'a+',
            input: 'a',
            expected: true,
            description: '–ü–ª—é—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–ü–ª—é—Å - –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
            regex: 'a+',
            input: 'aaa',
            expected: true,
            description: '–ü–ª—é—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤',
        },
        {
            name: '–ü–ª—é—Å - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
            regex: 'a+',
            input: 'b',
            expected: false,
            description: '–ü–ª—é—Å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–ü–ª—é—Å - —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
            regex: 'a+',
            input: 'aab',
            expected: false,
            description: '–ü–ª—é—Å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã',
        },

        // ========== –í–û–ü–†–û–° (?) ==========
        {
            name: '–í–æ–ø—Ä–æ—Å - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: 'a?',
            input: '',
            expected: true,
            description: '–í–æ–ø—Ä–æ—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É',
        },
        {
            name: '–í–æ–ø—Ä–æ—Å - –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
            regex: 'a?',
            input: 'a',
            expected: true,
            description: '–í–æ–ø—Ä–æ—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–í–æ–ø—Ä–æ—Å - –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞',
            regex: 'a?',
            input: 'aa',
            expected: false,
            description: '–í–æ–ø—Ä–æ—Å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞',
        },
        {
            name: '–í–æ–ø—Ä–æ—Å - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
            regex: 'a?',
            input: 'b',
            expected: false,
            description: '–í–æ–ø—Ä–æ—Å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–í–æ–ø—Ä–æ—Å –≤ —Å–ª–æ–≤–µ - —Å —Å–∏–º–≤–æ–ª–æ–º',
            regex: 'colou?r',
            input: 'colour',
            expected: true,
            description: '–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
        },
        {
            name: '–í–æ–ø—Ä–æ—Å –≤ —Å–ª–æ–≤–µ - –±–µ–∑ —Å–∏–º–≤–æ–ª–∞',
            regex: 'colou?r',
            input: 'color',
            expected: true,
            description: '–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
        },

        // ========== –ì–†–£–ü–ü–´ ==========
        {
            name: '–ü—Ä–æ—Å—Ç–∞—è –≥—Ä—É–ø–ø–∞',
            regex: '(abc)',
            input: 'abc',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
        },
        {
            name: '–ì—Ä—É–ø–ø–∞ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π',
            regex: '(a|b)',
            input: 'a',
            expected: true,
            description: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã',
        },
        {
            name: '–ì—Ä—É–ø–ø–∞ —Å –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º',
            regex: '(ab)+',
            input: 'ab',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å –ø–ª—é—Å–æ–º - –æ–¥–Ω–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ',
        },
        {
            name: '–ì—Ä—É–ø–ø–∞ —Å –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º - –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π',
            regex: '(ab)+',
            input: 'abab',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å –ø–ª—é—Å–æ–º - –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π',
        },
        {
            name: '–ì—Ä—É–ø–ø–∞ —Å –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: '(ab)+',
            input: '',
            expected: false,
            description: '–ì—Ä—É–ø–ø–∞ —Å –ø–ª—é—Å–æ–º –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É',
        },
        {
            name: '–°–ª–æ–∂–Ω–∞—è –≥—Ä—É–ø–ø–∞',
            regex: '(a|b)*c',
            input: 'aaabbbaaac',
            expected: true,
            description: '–°–ª–æ–∂–Ω–∞—è –≥—Ä—É–ø–ø–∞ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –∏ –∑–≤–µ–∑–¥–æ—á–∫–æ–π',
        },

        // ========== –°–ò–ú–í–û–õ–¨–ù–´–ï –ö–õ–ê–°–°–´ ==========
        {
            name: '–ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ a',
            regex: '[abc]',
            input: 'a',
            expected: true,
            description: '–°–∏–º–≤–æ–ª –∏–∑ –∫–ª–∞—Å—Å–∞',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ b',
            regex: '[abc]',
            input: 'b',
            expected: true,
            description: '–î—Ä—É–≥–æ–π —Å–∏–º–≤–æ–ª –∏–∑ –∫–ª–∞—Å—Å–∞',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ c',
            regex: '[abc]',
            input: 'c',
            expected: true,
            description: '–¢—Ä–µ—Ç–∏–π —Å–∏–º–≤–æ–ª –∏–∑ –∫–ª–∞—Å—Å–∞',
        },
        {
            name: '–ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å - –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
            regex: '[abc]',
            input: 'd',
            expected: false,
            description: '–°–∏–º–≤–æ–ª –Ω–µ –∏–∑ –∫–ª–∞—Å—Å–∞',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω –±—É–∫–≤ - –Ω–∞—á–∞–ª–æ',
            regex: '[a-z]',
            input: 'a',
            expected: true,
            description: '–ù–∞—á–∞–ª–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω –±—É–∫–≤ - —Å–µ—Ä–µ–¥–∏–Ω–∞',
            regex: '[a-z]',
            input: 'm',
            expected: true,
            description: '–°–µ—Ä–µ–¥–∏–Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω –±—É–∫–≤ - –∫–æ–Ω–µ—Ü',
            regex: '[a-z]',
            input: 'z',
            expected: true,
            description: '–ö–æ–Ω–µ—Ü –¥–∏–∞–ø–∞–∑–æ–Ω–∞',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω –±—É–∫–≤ - –∑–∞–≥–ª–∞–≤–Ω–∞—è',
            regex: '[a-z]',
            input: 'A',
            expected: false,
            description: '–ó–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞ –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω —Ü–∏—Ñ—Ä',
            regex: '[0-9]',
            input: '5',
            expected: true,
            description: '–¶–∏—Ñ—Ä–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ',
        },
        {
            name: '–î–∏–∞–ø–∞–∑–æ–Ω —Ü–∏—Ñ—Ä - –±—É–∫–≤–∞',
            regex: '[0-9]',
            input: 'a',
            expected: false,
            description: '–ë—É–∫–≤–∞ –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ —Ü–∏—Ñ—Ä',
        },
        {
            name: '–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å - –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª',
            regex: '[^abc]',
            input: 'a',
            expected: false,
            description: '–ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª',
        },
        {
            name: '–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª',
            regex: '[^abc]',
            input: 'd',
            expected: true,
            description: '–°–∏–º–≤–æ–ª –Ω–µ –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö',
        },

        // ========== –≠–ö–†–ê–ù–ò–†–û–í–ê–ù–ò–ï ==========
        {
            name: '–¶–∏—Ñ—Ä—ã \\d - —Ü–∏—Ñ—Ä–∞',
            regex: '\\d',
            input: '5',
            expected: true,
            description: '–¶–∏—Ñ—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\d',
        },
        {
            name: '–¶–∏—Ñ—Ä—ã \\d - –±—É–∫–≤–∞',
            regex: '\\d',
            input: 'a',
            expected: false,
            description: '–ë—É–∫–≤–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\d',
        },
        {
            name: '–°–ª–æ–≤–æ \\w - –±—É–∫–≤–∞',
            regex: '\\w',
            input: 'a',
            expected: true,
            description: '–ë—É–∫–≤–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\w',
        },
        {
            name: '–°–ª–æ–≤–æ \\w - —Ü–∏—Ñ—Ä–∞',
            regex: '\\w',
            input: '5',
            expected: true,
            description: '–¶–∏—Ñ—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\w',
        },
        {
            name: '–°–ª–æ–≤–æ \\w - –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ',
            regex: '\\w',
            input: '_',
            expected: false,
            description: '–ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\w',
        },
        {
            name: '–°–ª–æ–≤–æ \\w - –ø—Ä–æ–±–µ–ª',
            regex: '\\w',
            input: ' ',
            expected: false,
            description: '–ü—Ä–æ–±–µ–ª –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\w',
        },
        {
            name: '–ü—Ä–æ–±–µ–ª \\s - –ø—Ä–æ–±–µ–ª',
            regex: '\\s',
            input: ' ',
            expected: true,
            description: '–ü—Ä–æ–±–µ–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\s',
        },
        {
            name: '–ü—Ä–æ–±–µ–ª \\s - —Ç–∞–±—É–ª—è—Ü–∏—è',
            regex: '\\s',
            input: '\t',
            expected: true,
            description: '–¢–∞–±—É–ª—è—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\s',
        },
        {
            name: '–ü—Ä–æ–±–µ–ª \\s - –±—É–∫–≤–∞',
            regex: '\\s',
            input: 'a',
            expected: false,
            description: '–ë—É–∫–≤–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç \\s',
        },

        // ========== –¢–û–ß–ö–ê ==========
        {
            name: '–¢–æ—á–∫–∞ - –±—É–∫–≤–∞',
            regex: '.',
            input: 'a',
            expected: true,
            description: '–¢–æ—á–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±—É–∫–≤–µ',
        },
        {
            name: '–¢–æ—á–∫–∞ - —Ü–∏—Ñ—Ä–∞',
            regex: '.',
            input: '5',
            expected: true,
            description: '–¢–æ—á–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ü–∏—Ñ—Ä–µ',
        },
        {
            name: '–¢–æ—á–∫–∞ - —Å–∏–º–≤–æ–ª',
            regex: '.',
            input: '@',
            expected: true,
            description: '–¢–æ—á–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–∏–º–≤–æ–ª—É',
        },
        {
            name: '–¢–æ—á–∫–∞ - –ø—Ä–æ–±–µ–ª',
            regex: '.',
            input: ' ',
            expected: false,
            description: '–¢–æ—á–∫–∞ –ù–ï —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–±–µ–ª—É (–Ω–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)',
        },
        {
            name: '–¢–æ—á–∫–∞ - —Ç–∞–±—É–ª—è—Ü–∏—è',
            regex: '.',
            input: '\t',
            expected: false,
            description: '–¢–æ—á–∫–∞ –ù–ï —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±—É–ª—è—Ü–∏–∏ (–Ω–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)',
        },

        // ========== –°–õ–û–ñ–ù–´–ï –ö–û–ú–ë–ò–ù–ê–¶–ò–ò ==========
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - a+b*',
            regex: 'a+b*',
            input: 'a',
            expected: true,
            description: '–ü–ª—é—Å + –∑–≤–µ–∑–¥–æ—á–∫–∞: —Ç–æ–ª—å–∫–æ a',
        },
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - a+b*',
            regex: 'a+b*',
            input: 'aaa',
            expected: true,
            description: '–ü–ª—é—Å + –∑–≤–µ–∑–¥–æ—á–∫–∞: –º–Ω–æ–≥–æ a',
        },
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - a+b*',
            regex: 'a+b*',
            input: 'ab',
            expected: true,
            description: '–ü–ª—é—Å + –∑–≤–µ–∑–¥–æ—á–∫–∞: a + b',
        },
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - a+b*',
            regex: 'a+b*',
            input: 'aabbb',
            expected: true,
            description: '–ü–ª—é—Å + –∑–≤–µ–∑–¥–æ—á–∫–∞: –º–Ω–æ–≥–æ a + –º–Ω–æ–≥–æ b',
        },
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ - a+b*',
            regex: 'a+b*',
            input: 'b',
            expected: false,
            description: '–ü–ª—é—Å + –∑–≤–µ–∑–¥–æ—á–∫–∞: —Ç–æ–ª—å–∫–æ b (–Ω–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ a)',
        },
        {
            name: '–°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - (a|b)*c',
            regex: '(a|b)*c',
            input: 'c',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: —Ç–æ–ª—å–∫–æ c',
        },
        {
            name: '–°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - (a|b)*c',
            regex: '(a|b)*c',
            input: 'ac',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: a + c',
        },
        {
            name: '–°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - (a|b)*c',
            regex: '(a|b)*c',
            input: 'bc',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: b + c',
        },
        {
            name: '–°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - (a|b)*c',
            regex: '(a|b)*c',
            input: 'ababc',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π + c',
        },
        {
            name: '–°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - (a|b)*c',
            regex: '(a|b)*c',
            input: 'abc',
            expected: true,
            description: '–ì—Ä—É–ø–ø–∞ —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π: —Å–º–µ—à–∞–Ω–Ω—ã–µ + c',
        },

        // ========== –ì–†–ê–ù–ò–ß–ù–´–ï –°–õ–£–ß–ê–ò ==========
        {
            name: '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞',
            regex: 'a*',
            input: 'a'.repeat(1000),
            expected: true,
            description: '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤',
        },
        {
            name: '–°–ª–æ–∂–Ω—ã–π —Ä–µ–≥–µ–∫—Å —Å –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π',
            regex: '(a|b)*',
            input: 'ab'.repeat(500),
            expected: true,
            description: '–°–ª–æ–∂–Ω—ã–π —Ä–µ–≥–µ–∫—Å —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π',
        },

        // ========== –†–ï–ê–õ–¨–ù–´–ï –ü–†–ò–ú–ï–†–´ ==========
        {
            name: 'Email –ø—Ä–æ—Å—Ç–æ–π - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π',
            regex: '[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[a-zA-Z]+',
            input: 'user@example.com',
            expected: true,
            description: '–ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ email',
        },
        {
            name: 'Email –ø—Ä–æ—Å—Ç–æ–π - –±–µ–∑ @',
            regex: '[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[a-zA-Z]+',
            input: 'userexample.com',
            expected: false,
            description: 'Email –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @',
        },
        {
            name: '–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π',
            regex: '[a-zA-Z_][a-zA-Z0-9_]*',
            input: 'variable_name123',
            expected: true,
            description: '–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π',
        },
        {
            name: '–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã',
            regex: '[a-zA-Z_][a-zA-Z0-9_]*',
            input: '123variable',
            expected: false,
            description: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã)',
        },

        // ========== –°–¢–†–ï–°–°-–¢–ï–°–¢–´ ==========
        {
            name: '–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã',
            regex: 'a|b|c|d|e|f|g|h|i|j',
            input: 'e',
            expected: true,
            description: '–ú–Ω–æ–≥–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ',
        },
        {
            name: '–ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å',
            regex: '((((a))))',
            input: 'a',
            expected: true,
            description: '–ì–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã',
        },
        {
            name: '–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤',
            regex: '(a+|b*|c?)+',
            input: 'aaabbbccc',
            expected: true,
            description: '–í—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤ –æ–¥–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏',
        },
    ];

    const total = testCases.length;
    console.log(`üöÄ –ó–ê–ü–£–°–ö –í–°–ï–• –¢–ï–°–¢–û–í –î–ö–ê (${total} —à—Ç—É–∫–∞):`);

    let passed = 0;

    for (const testCase of testCases) {
        if (runSingleTest(testCase)) {
            passed++;
        }
    }

    const allSuccess = passed === total;

    if (!allSuccess) {
        console.log(`\n${'-'.repeat(80)}`);
        console.log(`‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ: ${total - passed} —Ç–µ—Å—Ç–æ–≤`);
        process.exit(1);
    }

    return { totalPassed: passed, totalTests: total, success: allSuccess };
}

if (typeof window === 'undefined') {
    runAllDFATests();
}
