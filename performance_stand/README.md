# Система тестирования производительности алгоритмов раскраски синтаксиса

## Описание

Данная система предназначена для сравнительного анализа производительности трех различных подходов к раскраске синтаксиса:

1. **RegexHighlighter** - простое применение регулярных выражений
2. **MealyHighlighter** - использование автомата Мили
3. **RopeHighlighter** - инкрементальная раскраска с использованием структуры Rope

## Измеряемые метрики

- **Время инициализации** - время первоначальной раскраски всего текста
- **Среднее время обновления** - среднее время реакции на изменение текста
- **Латентность** - минимальное время отклика системы
- **Пропускная способность** - количество изменений в секунду
- **Использование памяти** - приблизительный размер структур данных
- **Статистика дерева** (только для Rope) - количество узлов, высота, средний размер листа

## Запуск тестов

### Быстрый старт

```bash
cd bmstu_dimploma_project_2025/performance_stand
node run_test.js
```

Это запустит тесты для языка Go с размерами 1000, 5000, 10000, 20000, 50000 строк.

### Настройка параметров

```bash
# Тестирование для языка Python
node run_test.js Python

# Тестирование с custom размерами
node run_test.js Go 100,500,1000,5000,10000

# Полный пример
node run_test.js JavaScript 1000,2000,5000,10000,20000,50000,100000
```

### Доступные языки

Языки берутся из файла `rules.js`. На данный момент поддерживаются:
- Go
- C
- C++
- Python
- JavaScript
- Java
- Markdown

## Результаты

После выполнения тестов будет создан файл `performance_report.html` с интерактивными графиками и таблицами.

### Содержание отчета:

1. **Сводная статистика** - карточки с основными показателями каждого алгоритма
2. **Графики производительности**:
   - Время инициализации vs размер текста
   - Среднее время обновления vs размер текста (логарифмическая шкала)
   - Латентность vs размер текста (логарифмическая шкала)
   - Пропускная способность vs размер текста (логарифмическая шкала)
   - Использование памяти vs размер текста
3. **Статистика структуры Rope** - информация о дереве для разных размеров
4. **Детальная таблица** - все численные результаты

### Возможности отчета:

- Интерактивные графики (наведите курсор для просмотра значений)
- Кнопки скачивания графиков в формате PNG
- Адаптивный дизайн для разных размеров экрана

## Примеры интерпретации результатов

### Время инициализации
- **RegexHighlighter** - обычно показывает линейную зависимость O(n*m), где n - размер текста, m - количество регулярных выражений
- **MealyHighlighter** - линейная зависимость O(n), но с большей константой из-за сложности автомата
- **RopeHighlighter** - O(n log n) из-за построения дерева

### Время обновления
- **RegexHighlighter** - всегда перекрашивает весь текст, O(n)
- **MealyHighlighter** - также перекрашивает весь текст, O(n)
- **RopeHighlighter** - инкрементальное обновление, O(log n) в лучшем случае

### Использование памяти
- **RegexHighlighter** - минимальное, только скомпилированные регулярки
- **MealyHighlighter** - таблица переходов автомата, может быть значительной
- **RopeHighlighter** - самое большое из-за структуры дерева и массивов A

## Технические детали

### Генерация тестовых данных
Система генерирует синтетический код с различными конструкциями:
- Функции
- Классы
- Комментарии (однострочные и многострочные)
- Строковые литералы
- Условные конструкции

### Типы изменений
Для тестирования обновлений генерируются три типа изменений:
- Вставка символа
- Удаление символа
- Замена символа

Каждый тест включает 100 случайных изменений.

## Расширение системы

### Добавление нового языка
Отредактируйте файл `rules.js`, добавив правила для нового языка.

### Добавление нового алгоритма
1. Создайте новый файл `stand4_youralgorithm.js`
2. Реализуйте класс с методами:
   - `constructor(language)`
   - `highlight(text)` - возвращает массив `[{start, end, style}]`
   - `update(newText, changeStart, changeEnd)`
   - `getMemoryUsage()` (опционально)
3. Добавьте класс в массив в `benchmark.js`

## Известные ограничения

1. Измерение памяти является приблизительным
2. Результаты могут варьироваться в зависимости от загрузки системы
3. Для больших размеров (>100k строк) тесты могут занимать значительное время 