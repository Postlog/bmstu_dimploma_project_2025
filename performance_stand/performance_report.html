
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отчет о производительности систем раскраски синтаксиса</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #333;
        }
        .chart-container {
            background-color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        canvas {
            max-height: 400px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-card h3 {
            margin-top: 0;
            color: #555;
        }
        .download-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .download-btn:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .tree-stats {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Отчет о производительности систем раскраски синтаксиса</h1>
    <p>Язык: <strong>Go</strong></p>
    <p>Размеры тестов: 100, 500, 1000, 5000, 10000, 20000, 50000, 100000 строк</p>
    <p>Дата: 01.06.2025, 21:32:46</p>
    
    <div class="stats">
        
        <div class="stat-card">
            <h3>RegexHighlighter</h3>
            <p><strong>Время компиляции:</strong> 0.09 мс</p>
            <p><strong>Память (50K строк):</strong> 0.00 МБ</p>
            <p><strong>Мин. латентность:</strong> 0.121 мс</p>
        </div>
        
        <div class="stat-card">
            <h3>MealyHighlighter</h3>
            <p><strong>Время компиляции:</strong> 585.27 мс</p>
            <p><strong>Память (50K строк):</strong> 0.31 МБ</p>
            <p><strong>Мин. латентность:</strong> 0.036 мс</p>
        </div>
        
    </div>
    
    <div class="chart-container">
        <h2>Время инициализации</h2>
        <canvas id="initChart"></canvas>
        <button class="download-btn" onclick="downloadChart('initChart')">Скачать график</button>
    </div>
    
    <div class="chart-container">
        <h2>Среднее время обновления при редактировании</h2>
        <canvas id="updateChart"></canvas>
        <button class="download-btn" onclick="downloadChart('updateChart')">Скачать график</button>
    </div>
    
    <div class="chart-container">
        <h2>Латентность (минимальное время отклика)</h2>
        <canvas id="latencyChart"></canvas>
        <button class="download-btn" onclick="downloadChart('latencyChart')">Скачать график</button>
    </div>
    
    <div class="chart-container">
        <h2>Пропускная способность (изменений/сек)</h2>
        <canvas id="throughputChart"></canvas>
        <button class="download-btn" onclick="downloadChart('throughputChart')">Скачать график</button>
    </div>
    
    <div class="chart-container">
        <h2>Использование памяти</h2>
        <canvas id="memoryChart"></canvas>
        <button class="download-btn" onclick="downloadChart('memoryChart')">Скачать график</button>
    </div>
    
    
    
    <div class="chart-container">
        <h2>Детальные результаты</h2>
        <table>
            <thead>
                <tr>
                    <th>Система</th>
                    <th>Размер (строк)</th>
                    <th>Инициализация (мс)</th>
                    <th>Ср. обновление (мс)</th>
                    <th>Мин. обновление (мс)</th>
                    <th>Макс. обновление (мс)</th>
                </tr>
            </thead>
            <tbody>
                
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>100</td>
                        <td>0.68</td>
                        <td>0.194</td>
                        <td>0.121</td>
                        <td>1.309</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>500</td>
                        <td>0.78</td>
                        <td>0.755</td>
                        <td>0.662</td>
                        <td>1.143</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>1000</td>
                        <td>1.57</td>
                        <td>1.699</td>
                        <td>1.417</td>
                        <td>2.179</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>5000</td>
                        <td>8.32</td>
                        <td>8.925</td>
                        <td>7.932</td>
                        <td>12.726</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>10000</td>
                        <td>18.11</td>
                        <td>20.132</td>
                        <td>16.824</td>
                        <td>31.553</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>20000</td>
                        <td>48.68</td>
                        <td>45.675</td>
                        <td>42.295</td>
                        <td>54.195</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>50000</td>
                        <td>145.33</td>
                        <td>139.428</td>
                        <td>130.434</td>
                        <td>195.592</td>
                    </tr>
                    
                    <tr>
                        <td>RegexHighlighter</td>
                        <td>100000</td>
                        <td>363.56</td>
                        <td>366.535</td>
                        <td>345.736</td>
                        <td>424.481</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>100</td>
                        <td>0.36</td>
                        <td>0.055</td>
                        <td>0.036</td>
                        <td>0.695</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>500</td>
                        <td>0.22</td>
                        <td>0.201</td>
                        <td>0.179</td>
                        <td>0.839</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>1000</td>
                        <td>0.36</td>
                        <td>0.381</td>
                        <td>0.355</td>
                        <td>0.789</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>5000</td>
                        <td>1.87</td>
                        <td>1.866</td>
                        <td>1.796</td>
                        <td>2.602</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>10000</td>
                        <td>4.25</td>
                        <td>3.685</td>
                        <td>3.391</td>
                        <td>4.739</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>20000</td>
                        <td>7.61</td>
                        <td>7.775</td>
                        <td>7.487</td>
                        <td>9.035</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>50000</td>
                        <td>19.50</td>
                        <td>19.561</td>
                        <td>18.127</td>
                        <td>21.573</td>
                    </tr>
                    
                    <tr>
                        <td>MealyHighlighter</td>
                        <td>100000</td>
                        <td>38.58</td>
                        <td>39.055</td>
                        <td>28.423</td>
                        <td>55.589</td>
                    </tr>
                    
            </tbody>
        </table>
    </div>
    
    <script>
        const results = [{"name":"RegexHighlighter","buildTime":0.09333400000000225,"initialization":[{"size":100,"time":0.6793750000000003},{"size":500,"time":0.7846249999999984},{"size":1000,"time":1.5685000000000002},{"size":5000,"time":8.31574999999998},{"size":10000,"time":18.108249999999998},{"size":20000,"time":48.67645799999991},{"size":50000,"time":145.3282909999998},{"size":100000,"time":363.5609169999989}],"updates":[{"size":100,"avg":0.19351652083333323,"min":0.1208340000000021,"max":1.3088750000000005},{"size":500,"avg":0.7545755824175822,"min":0.6617090000000019,"max":1.143374999999999},{"size":1000,"avg":1.6992254105263167,"min":1.4171249999999986,"max":2.1790829999999914},{"size":5000,"avg":8.925276000000006,"min":7.931958000000009,"max":12.725708000000054},{"size":10000,"avg":20.13185483870969,"min":16.823667000000114,"max":31.553499999999985},{"size":20000,"avg":45.67471830434786,"min":42.29491600000074,"max":54.19450000000006},{"size":50000,"avg":139.4276032812501,"min":130.43391599999813,"max":195.59187500000007},{"size":100000,"avg":366.5352991684214,"min":345.73570800000016,"max":424.48087499999383}],"memory":[{"size":100,"memory":2430},{"size":500,"memory":2430},{"size":1000,"memory":2430},{"size":5000,"memory":2430},{"size":10000,"memory":2430},{"size":20000,"memory":2430},{"size":50000,"memory":2430},{"size":100000,"memory":2430}],"latency":[{"size":100,"latency":0.1208340000000021},{"size":500,"latency":0.6617090000000019},{"size":1000,"latency":1.4171249999999986},{"size":5000,"latency":7.931958000000009},{"size":10000,"latency":16.823667000000114},{"size":20000,"latency":42.29491600000074},{"size":50000,"latency":130.43391599999813},{"size":100000,"latency":345.73570800000016}],"throughput":[{"size":100,"throughput":5167.517458942192},{"size":500,"throughput":1325.248289636014},{"size":1000,"throughput":588.503440335359},{"size":5000,"throughput":112.0413531189399},{"size":10000,"throughput":49.67252188194762},{"size":20000,"throughput":21.893950025846316},{"size":50000,"throughput":7.172180948867229},{"size":100000,"throughput":2.7282501910968864}]},{"name":"MealyHighlighter","buildTime":585.2726249999978,"initialization":[{"size":100,"time":0.3641669999997248},{"size":500,"time":0.2164580000026035},{"size":1000,"time":0.35733299999992596},{"size":5000,"time":1.8673750000016298},{"size":10000,"time":4.251708000003418},{"size":20000,"time":7.606665999999677},{"size":50000,"time":19.49762500000361},{"size":100000,"time":38.577250000002095}],"updates":[{"size":100,"avg":0.054937799999913155,"min":0.03645900000265101,"max":0.6945839999971213},{"size":500,"avg":0.20061548453593356,"min":0.17933300000004238,"max":0.8387079999956768},{"size":1000,"avg":0.3811774791665812,"min":0.35545799999817973,"max":0.7887919999993755},{"size":5000,"avg":1.865547312499757,"min":1.795958000002429,"max":2.60216699999728},{"size":10000,"avg":3.684981343749996,"min":3.3907920000056038,"max":4.739291999998386},{"size":20000,"avg":7.774918010638391,"min":7.487332999997307,"max":9.03533299999981},{"size":50000,"avg":19.561166249999662,"min":18.12708399999974,"max":21.573083000002953},{"size":100000,"avg":39.0548219891301,"min":28.42279100000451,"max":55.58874999999534}],"memory":[{"size":100,"memory":322012},{"size":500,"memory":322012},{"size":1000,"memory":322012},{"size":5000,"memory":322012},{"size":10000,"memory":322012},{"size":20000,"memory":322012},{"size":50000,"memory":322012},{"size":100000,"memory":322012}],"latency":[{"size":100,"latency":0.03645900000265101},{"size":500,"latency":0.17933300000004238},{"size":1000,"latency":0.35545799999817973},{"size":5000,"latency":1.795958000002429},{"size":10000,"latency":3.3907920000056038},{"size":20000,"latency":7.487332999997307},{"size":50000,"latency":18.12708399999974},{"size":100000,"latency":28.42279100000451}],"throughput":[{"size":100,"throughput":18202.4034453797},{"size":500,"throughput":4984.660093976362},{"size":1000,"throughput":2623.44984857561},{"size":5000,"throughput":536.035721688581},{"size":10000,"throughput":271.3717945129016},{"size":20000,"throughput":128.61871966131395},{"size":50000,"throughput":51.1216962843418},{"size":100000,"throughput":25.60503285044608}]}];
        const sizes = [100,500,1000,5000,10000,20000,50000,100000];
        
        // Функция для скачивания графика
        function downloadChart(chartId) {
            const canvas = document.getElementById(chartId);
            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = chartId + '.png';
            link.href = url;
            link.click();
        }
        
        // График инициализации
        new Chart(document.getElementById('initChart'), {
            type: 'line',
            data: {
                labels: sizes,
                datasets: results.map((r, i) => ({
                    label: r.name,
                    data: r.initialization.map(d => d.time),
                    borderColor: ['#FF6384', '#36A2EB', '#FFCE56'][i],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'][i] + '20',
                    tension: 0.1,
                    borderDash: i === 0 ? [5, 5] : [],
                    borderWidth: i === 1 ? 3 : 2,
                    pointStyle: ['circle', 'triangle'][i],
                    pointRadius: 5,
                    pointHoverRadius: 8
                }))
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Время инициализации vs Размер текста'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Количество строк'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Время (мс)'
                        }
                    }
                }
            }
        });
        
        // График обновлений
        new Chart(document.getElementById('updateChart'), {
            type: 'line',
            data: {
                labels: sizes,
                datasets: results.map((r, i) => ({
                    label: r.name,
                    data: r.updates.map(d => d.avg),
                    borderColor: ['#FF6384', '#36A2EB', '#FFCE56'][i],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'][i] + '20',
                    tension: 0.1,
                    borderDash: i === 0 ? [5, 5] : [],
                    borderWidth: i === 1 ? 3 : 2,
                    pointStyle: ['circle', 'triangle'][i],
                    pointRadius: 5,
                    pointHoverRadius: 8
                }))
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                aspectRatio: 0.5,
                plugins: {
                    title: {
                        display: true,
                        text: 'Среднее время обновления vs Размер текста'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Количество строк'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Время (мс)'
                        },
                        type: 'logarithmic'
                    }
                }
            }
        });
        
        // График латентности
        new Chart(document.getElementById('latencyChart'), {
            type: 'line',
            data: {
                labels: sizes,
                datasets: results.map((r, i) => ({
                    label: r.name,
                    data: r.latency.map(d => d.latency),
                    borderColor: ['#FF6384', '#36A2EB', '#FFCE56'][i],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'][i] + '20',
                    tension: 0.1
                }))
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Минимальная латентность vs Размер текста'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Количество строк'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Время (мс)'
                        },
                        type: 'logarithmic'
                    }
                }
            }
        });
        
        // График пропускной способности
        new Chart(document.getElementById('throughputChart'), {
            type: 'line',
            data: {
                labels: sizes,
                datasets: results.map((r, i) => ({
                    label: r.name,
                    data: r.throughput.map(d => d.throughput),
                    borderColor: ['#FF6384', '#36A2EB', '#FFCE56'][i],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'][i] + '20',
                    tension: 0.1
                }))
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Пропускная способность vs Размер текста'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Количество строк'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Изменений в секунду'
                        },
                        type: 'logarithmic'
                    }
                }
            }
        });
        
        // График памяти
        const memoryData = results.filter(r => r.memory.length > 0);
        if (memoryData.length > 0) {
            new Chart(document.getElementById('memoryChart'), {
                type: 'line',
                data: {
                    labels: sizes,
                    datasets: memoryData.map((r, i) => ({
                        label: r.name,
                        data: r.memory.map(d => d.memory / 1024 / 1024), // В мегабайтах
                        borderColor: ['#FF6384', '#36A2EB', '#FFCE56'][i],
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'][i] + '20',
                        tension: 0.1
                    }))
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Использование памяти vs Размер текста'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Количество строк'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Память (МБ)'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
    